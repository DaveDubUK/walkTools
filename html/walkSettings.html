<html>
    <head>
        <link rel="stylesheet" type="text/css" href="walkStyle.css">
        <script>

            function emitUpdate() {
                EventBridge.emitWebEvent(JSON.stringify({
                    type: "update",
                    armsFree: elArmsFree.checked,
                    makesFootStepSounds: elFootstepSounds.checked,
                    mixamoPreRotations: elMixamoPreRotations.checked
                }));
            }

            function loaded() {
                // assign form elements to vars
                var powerOn = true;
                //elPower = document.getElementById("power");
                elArmsFree = document.getElementById("arms-free");
                elFootstepSounds = document.getElementById("footstep-sounds");
                elMixamoPreRotations = document.getElementById("mixamo-pre-rotations");
                elAnimationCharacterSelect = document.getElementById("animation-character-select");

                if (window.EventBridge !== undefined) {
                    EventBridge.scriptEventReceived.connect(function(data) {
                        data = JSON.parse(data);

                        if (data.type == "update") {
                            if (data.armsFree !== undefined) {
                                elArmsFree.checked = data.armsFree;
                            }
                            if (data.makesFootStepSounds !== undefined) {
                                elFootstepSounds.checked = data.makesFootStepSounds;
                            }
                            if (data.mixamoPreRotations !== undefined) {
                                elMixamoPreRotations.checked = data.mixamoPreRotations;
                            }
                        }
                    });
                }
                elArmsFree.addEventListener("change", emitUpdate);
                elFootstepSounds.addEventListener("change", emitUpdate);
                elMixamoPreRotations.addEventListener("change", emitUpdate);
                /*elPower.addEventListener("click", function() {
                    EventBridge.emitWebEvent(JSON.stringify({
                        type: "powerToggle"
                    }));
                    powerOn = !powerOn;
                    if (powerOn) {
                        elPower.value = "Turn Animation Off";
                    } else {
                        elPower.value = "Turn Animation On";
                    }
                });*/
                // request initial values
                EventBridge.emitWebEvent(JSON.stringify({ type: 'init' }));
            }
        </script>
    </head>
    <body onload='loaded();'>
        <div>
        
            <div id="walk-settings-header">        
            </div>        
            
            <div class="settings-section">
                <!--input type="button" id="power" value="Turn Animation Off" style="margin-left:30px; margin-top:10px; display:none;"></button-->
                <label>Character</label>
                <select class="editor-select-input" id="animation-character-select"></select>
            </div>            

            <div class="settings-section">
                <label>Arms free</label>
                <span>
                    <input type='checkbox' id="arms-free">
                </span>
            </div>

            <div class="settings-section">
                <label>Footstep sounds</label>
                <span>
                    <input type='checkbox' id="footstep-sounds">
                </span>
            </div>

            <div class="settings-section">
                <label>Mixamo pre-rotations</label>
                <span>
                    <input type='checkbox' id="mixamo-pre-rotations">
                </span>
            </div>

        </div>
    </body>
</html>
